<html>

<head>
	<meta charset="utf-8" />
	<script src="wasm_exec.js"></script>
	<script>
		const go = new Go();
		WebAssembly.instantiateStreaming(fetch("main.wasm"), go.importObject).then((result) => {
			go.run(result.instance);
		});
	</script>
</head>

<body>
	<textarea id="jsoninput" name="jsoninput" cols="80" rows="20"></textarea>
	<input id="button" type="submit" name="button" value="pretty json" onclick="json(jsoninput.value)" />
	<textarea id="jsonoutput" name="jsonoutput" cols="80" rows="20"></textarea>
	<br>
	<br>
	<input id="num1" name="num1" type="text">
	<input id="num2" name="num2" type="text">
	<input id="button" type="submit" name="button" value="Calculate" onclick="calc()" />
	<p id="calcoutput"></p><br>
</body>
<script>
	var json = function (input) {
		var result = formatJSON(input);
		if ((result != null) && ('error' in result)) {
			console.log("Go return value", result)
			jsonoutput.value = ""
			alert(result.error)
		}
	}
	var calc = function (input) {
		num1= document.getElementById('num1').value
		num2= document.getElementById('num2').value
		var result = calculate(num1, num2);
		if ((result != null) && ('error' in result)) {
			console.log("Go return value", result)
			calcoutput.innerText = ""
			alert(result.error)
		}
	}
</script>

</html>
